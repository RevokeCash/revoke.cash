import { ShieldExclamationIcon } from '@heroicons/react/24/outline';
import Card from 'components/common/Card';
import ChainLogo from 'components/common/ChainLogo';
import { Exploit, getUniqueChainIds } from 'lib/utils/allowance-exploit-list';
import Link from 'next/link';

interface Props {
  exploit: Exploit;
}

const ExploitCard = (props: Props) => {
  return (
    <Card icon={ShieldExclamationIcon} title={props.exploit.name} className="flex flex-col gap-4 ">
      <table className="table-auto">
        <tbody className="divide-y ">
          <tr>
            <td className="py-1 w-36">Discoverd on</td>
            <td className="py-1">{props.exploit.date}</td>
          </tr>
          <tr>
            <td className="py-1">Affected chains</td>
            <td className="py-1 flex gap-2">
              {getUniqueChainIds(props.exploit).map((chainId, index) => (
                <ChainLogo tooltip chainId={chainId} key={index} />
              ))}
            </td>
          </tr>
          <tr>
            <td className="py-1">Articles</td>
            <td className="py-1">
              <ul className="list-inside list-disc">
                {props.exploit.metaArticleUrls.map((article) => (
                  <li key={article}>
                    <Link href={article}>{new URL(article).hostname}</Link>
                  </li>
                ))}
              </ul>
            </td>
          </tr>
        </tbody>
      </table>

      <div>
        <h4>About</h4>
        <p>{props.exploit.description}</p>
      </div>
    </Card>
  );
};

export default ExploitCard;
