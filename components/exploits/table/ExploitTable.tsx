import { ChevronRightIcon } from '@heroicons/react/24/outline';
import { createColumnHelper, getCoreRowModel, useReactTable } from '@tanstack/react-table';
import { Exploit } from 'lib/data/exploits-loader';
import Link from 'next/link';
import ExploitTableBody from './ExploitTableBody';

type Props = {
  exploits: Exploit[];
};

const { accessor, display } = createColumnHelper<Exploit>();
const columns = [
  accessor('name', {
    id: 'name',
    header: 'Name',
  }),
  accessor('slug', {
    id: 'slug',
    header: 'Slug',
  }),

  // add button column
  display({
    id: 'button',
    // header: () => <HeaderCell i18nKey="address:headers.actions" align="right" />,
    cell: (row) => {
      return (
        <Link href={`/exploits/${row.row.original.slug}`} className="flex justify-end">
          <ChevronRightIcon className="h-6" />
        </Link>
      );
    },
  }),
];

export const ExploitTable = (props: Props) => {
  const table = useReactTable({
    data: props.exploits,
    columns,

    getCoreRowModel: getCoreRowModel<Exploit>(),
  });

  return (
    <div>
      <ExploitTableBody table={table} loading={false} />
    </div>
  );
};
