import Href from 'components/common/Href';
import ExploitCard from 'components/exploits/ExploitCard';
import ContentPageLayout from 'layouts/ContentPageLayout';
import { Exploit, getAllExploits } from 'lib/utils/allowance-exploit-list';
import { GetStaticProps, NextPage } from 'next';
import { DefaultSeo, NextSeo } from 'next-seo';
import useTranslation from 'next-translate/useTranslation';

interface Props {
  exploits: Exploit[];
}

const ExploitOverviewPage: NextPage<Props> = (props) => {
  const { t } = useTranslation();

  return (
    <>
      <NextSeo {...DefaultSeo} title={t('exploits:meta.title')} description={t('exploits:meta.description')} />

      {/* <PublicLayout> */}
      <ContentPageLayout>
        {/* <AddressHeader /> */}
        <h1 className="mb-4">Exploit Overview Page</h1>

        {/* Exploits grid */}
        <div className="flex flex-col gap-4">
          {props.exploits.map((exploit) => (
            <Href
              router
              underline="none"
              href={`/exploits/${exploit.slug}`}
              className="hover:cursor-pointer hover:opacity-50 hover:bg-gray-200 duration-100"
              key={exploit.slug}
            >
              <ExploitCard exploit={exploit} />
            </Href>
          ))}
        </div>
      </ContentPageLayout>
      {/* </PublicLayout> */}
    </>
  );
};

export const getStaticProps: GetStaticProps<Props> = async (context) => {
  const exploits = await getAllExploits();

  return {
    props: {
      exploits,
    },
  };
};

export default ExploitOverviewPage;
